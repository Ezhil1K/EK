<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Technical Specialist - Cleanliness & Rust Prevention</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #f7f9fb; }
        /* Custom gradient for the header to ensure text is visible over the video */
        .header-bg {
            background: linear-gradient(180deg, rgba(0,0,0,0.6) 0%, rgba(0,0,0,0) 100%);
            transition: background-color 0.3s ease;
        }
        .scrolled {
            background-color: rgba(17, 24, 39, 0.95); /* Darker background when scrolled */
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        /* --- Floating Contact Stack Styling (New CSS) --- */
        #floating-contact-stack {
            /* Fixed position, slightly off the screen edge */
            right: 0.5rem; 
            top: 50%;
            /* Initially hidden and slightly off-screen to the right */
            opacity: 0;
            transform: translateY(-50%) translateX(100%); 
            transition: transform 0.4s ease-out, opacity 0.4s ease-out;
            z-index: 50; 
            /* Added margin to the right to prevent overlap with scrollbar when icons expand */
            margin-right: 15px;
        }
        
        #floating-contact-stack.show {
            /* Slide into view when 'show' class is added by JS */
            opacity: 1;
            transform: translateY(-50%) translateX(0);
        }

        /* Styles for the individual rounded icon buttons with hover expansion */
        .contact-icon-item {
            /* Set the final, expanded width and keep it constant */
            width: 170px; 
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: flex-start;
            background-color: white;
            border-radius: 9999px; /* Start rounded */
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            text-decoration: none; 
            
            /* Initial state: Pushed right by 120px (170px width - 50px icon size = 120px hidden content) */
            transform: translateX(120px); 
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
            overflow: hidden; 
        }
        
        /* State when hovering: Slide LEFT to reveal text (90% slide, leaving 10% or 12px hidden) */
        .contact-icon-item:hover {
            /* Slides 90% of the hidden 120px content. 10% of 120px is 12px. */
            transform: translateX(12px); 
            border-radius: 25px; /* Adjust border-radius for the 'open' look */
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);
        }
        
        /* Styling for the Icon container (to maintain fixed size) */
        .contact-icon {
            flex-shrink: 0;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem; 
        }
        
        /* Styling for the Text Label (Now always visible within the button, just slides) */
        .contact-label {
            white-space: nowrap;
            padding-right: 15px; /* Spacing for text */
            font-size: 0.9rem;
            font-weight: 600;
            color: #1f2937; 
        }
        /* --- End Floating Contact Stack Styling --- */
    </style>

    <!-- Google Analytics (GA4) Code - Measurement ID: G-365191627 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-365191627"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-365191627');
    </script>
</head>

<body>
    {% if data is defined %}
    
    <!-- Floating Contact Icon Stack (Scroll-Triggered) - INSERTED HERE -->
    <!-- Hidden on small screens, fixed on the right side -->
    <div id="floating-contact-stack" class="hidden md:flex fixed flex-col space-y-3">
        
        <!-- Phone/Call Icon with Hover Text -->
        <a href="tel:{{ data.phone_number }}" title="Call Me" class="contact-icon-item">
            <div class="contact-icon">ðŸ“ž</div>
            <span class="contact-label">Call Us</span>
        </a>
        
        <!-- Email Icon with Hover Text -->
        <a href="mailto:{{ data.email_address }}" title="Email Me" class="contact-icon-item">
            <div class="contact-icon">ðŸ“§</div>
            <span class="contact-label">Email</span>
        </a>
        
        <!-- LinkedIn Icon with Hover Text -->
        <a href="{{ data.linkedin_url }}" target="_blank" title="Connect on LinkedIn" class="contact-icon-item">
            <div class="contact-icon">ðŸ”—</div>
            <span class="contact-label">LinkedIn</span>
        </a>

    </div>
    
    <!-- Navigation Bar - Fixed and Transparent -->
    <header id="navbar" class="fixed top-0 left-0 w-full z-50 py-4 header-bg">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 flex justify-between items-center">
            <a href="#" class="text-2xl font-bold text-white tracking-widest hover:text-cyan-300 transition duration-300">
                Ezhilarasan.K
            </a>
            
            <!-- Desktop Navigation -->
            <nav class="hidden lg:flex space-x-8">
                {% set nav_links = [
                    ("Home", "#hero"), 
                    ("About", "#about"), 
                    ("Case Studies", "#casestudies"), 
                    ("Projects", "#projects"), 
                    ("Skills", "#skills"), 
                    ("Articles", "#articles"), 
                    ("Contact Me", "#contact")
                ] %}
                {% for name, href in nav_links %}
                    <a href="{{ href }}" class="text-white hover:text-cyan-300 transition duration-300 font-medium text-lg rounded-lg px-2 py-1">
                        {{ name }}
                    </a>
                {% endfor %}
            </nav>

            <!-- Mobile Menu Button -->
            <button id="mobile-menu-button" class="lg:hidden text-white focus:outline-none">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
            </button>
        </div>
        
        <!-- Mobile Menu (Hidden by default) -->
        <nav id="mobile-menu" class="lg:hidden hidden px-4 pt-2 pb-4 bg-gray-800 bg-opacity-95 mt-2 mx-4 rounded-lg shadow-xl">
             {% for name, href in nav_links %}
                 <a href="{{ href }}" class="block text-white hover:text-cyan-300 py-2 transition duration-300 border-b border-gray-700 last:border-b-0" onclick="document.getElementById('mobile-menu').classList.add('hidden');">
                    {{ name }}
                 </a>
             {% endfor %}
        </nav>
    </header>
    
    <!-- Hero Section with Looping Video -->
    <section id="hero" class="relative h-screen flex items-center justify-center overflow-hidden">
        <!-- Background Video -->
        <video autoplay loop muted playsinline class="absolute z-0 w-auto min-w-full min-h-full max-w-none object-cover">
            <source src="{{ data.hero_video_url }}" type="video/mp4">
            Your browser does not support the video tag.
        </video>

        <!-- Overlay to ensure text visibility -->
        <div class="absolute inset-0 bg-gray-900 opacity-60 z-10"></div>

        <!-- Hero Content -->
        <div class="z-20 text-center p-8 max-w-4xl mx-auto">
            <!-- UPDATED H1 FOR RED HIGHLIGHTING -->
            <h1 class="text-5xl sm:text-7xl font-extrabold text-white leading-tight mb-4 animate-fadeInUp">
                Technical Specialist - 
                <span class="text-red-500">Cleanliness & Rust Prevention</span>
            </h1>
            <!-- UPDATED P SUBTITLE -->
            <p class="text-xl sm:text-2xl text-cyan-300 font-light mb-8">
                Bridging Material Science, Technical Cleanliness, Rust Prevention and Process Engineering
            </p>
            <a href="#casestudies" class="inline-block px-8 py-3 bg-cyan-500 text-white font-semibold text-lg rounded-full shadow-lg hover:bg-cyan-600 transition duration-300 transform hover:scale-105">
                View My Case Studies
            </a>
        </div>
    </section>

    <!-- Content Sections -->
    <main class="py-16">
        <!-- About Me Section -->
        <section id="about" class="container mx-auto px-4 py-12">
            <h2 class="text-4xl font-bold text-gray-800 mb-8 text-center border-b-4 border-cyan-500 inline-block pb-1">About Me</h2>
            <div class="max-w-4xl mx-auto text-lg text-gray-700 leading-relaxed bg-white p-8 rounded-xl shadow-lg">
                <p>{{ data.about_me }}</p>
            </div>
        </section>

        <!-- Case Studies Section (Dynamic) -->
        <section id="casestudies" class="bg-gray-100 py-16">
            <div class="container mx-auto px-4">
                <h2 class="text-4xl font-bold text-gray-800 mb-12 text-center">Technical Case Studies & Problem Solving</h2>
                
                <div class="grid md:grid-cols-2 lg:grid-cols-2 gap-8">
                    <!-- Jinja2 Loop for Case Studies -->
                    {% for case in data.casestudies %}
                    <div class="bg-white p-6 rounded-xl shadow-lg hover:shadow-2xl transition duration-300 border-t-4 border-cyan-500 flex flex-col justify-between">
                        <div>
                            <h3 class="text-2xl font-semibold text-gray-900 mb-3">{{ case.title }}</h3>
                            <p class="text-gray-600 mb-4">{{ case.summary }}</p>
                        </div>
                        <a href="{{ case.detail_link }}" class="text-cyan-600 font-medium hover:text-cyan-800 flex items-center self-start">
                            View Full Analysis 
                            <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg>
                        </a>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </section>

        <!-- Skills Section (Dynamic) -->
        <section id="skills" class="container mx-auto px-4 py-16">
            <h2 class="text-4xl font-bold text-gray-800 mb-12 text-center">Core Technical Skills</h2>
            <div class="max-w-4xl mx-auto grid grid-cols-2 sm:grid-cols-3 gap-4">
                <!-- Jinja2 Loop for Skills -->
                {% for skill in data.skills %}
                <div class="bg-white p-4 rounded-lg shadow border border-gray-200 text-center hover:bg-cyan-50 transition duration-200">
                    <p class="font-medium text-gray-800">{{ skill }}</p>
                </div>
                {% endfor %}
            </div>
        </section>
        
        <!-- Projects Section (Dynamic) -->
        <section id="projects" class="bg-gray-100 py-16">
            <div class="container mx-auto px-4">
                <h2 class="text-4xl font-bold text-gray-800 mb-12 text-center">Key Applications & Projects</h2>
                <div class="grid md:grid-cols-2 gap-8">
                    <!-- Jinja2 Loop for Projects -->
                    {% for project in data.projects %}
                    <div class="bg-white p-6 rounded-xl shadow-lg border-l-4 border-cyan-400 hover:shadow-xl transition duration-300">
                        <h3 class="text-2xl font-semibold text-gray-900 mb-3">{{ project.title }}</h3>
                        <p class="text-gray-600 mb-4">{{ project.summary }}</p>
                        <a href="{{ project.link }}" class="text-cyan-600 font-medium hover:text-cyan-800">
                            Explore App
                        </a>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </section>

        <!-- Articles Section (Dynamic) -->
        <section id="articles" class="container mx-auto px-4 py-16">
            <h2 class="text-4xl font-bold text-gray-800 mb-12 text-center">Technical Articles & Insights</h2>
            <div class="max-w-4xl mx-auto space-y-6">
                <!-- Jinja2 Loop for Articles -->
                {% for article in data.articles %}
                <div class="bg-white p-5 rounded-lg shadow hover:shadow-md transition duration-300">
                    <h3 class="text-xl font-semibold text-gray-900 mb-1">{{ article.title }}</h3>
                    <p class="text-gray-600 mb-2">{{ article.summary }}</p>
                    <a href="{{ article.link }}" class="text-sm text-cyan-500 hover:text-cyan-700 font-medium">Read Article &rarr;</a>
                </div>
                {% endfor %}
            </div>
        </section>

        <!-- Contact Me Section -->
        <section id="contact" class="bg-gray-800 py-16">
            <div class="container mx-auto px-4 text-center">
                <h2 class="text-4xl font-bold text-white mb-6">Let's Connect</h2>
                <p class="text-gray-300 text-lg max-w-2xl mx-auto mb-8">
                    I am available for consultation on technical cleanliness auditing, failure analysis, and chemical process optimization.
                </p>
                <div class="flex flex-col sm:flex-row justify-center items-center space-y-4 sm:space-y-0 sm:space-x-6">
                    <a href="mailto:{{ data.email_address }}" class="px-6 py-3 bg-cyan-500 text-white font-semibold rounded-full hover:bg-cyan-600 transition duration-300 shadow-lg">
                        Email Me
                    </a>
                    <a href="{{ data.linkedin_url }}" target="_blank" class="px-6 py-3 bg-white text-gray-800 font-semibold rounded-full hover:bg-gray-200 transition duration-300 shadow-lg">
                        Connect on LinkedIn
                    </a>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-gray-900 text-center p-6 text-gray-400">
        <p>&copy; 2024 Ezhilarasan.K | Dynamic Portfolio built with Flask & Vercel</p>
    </footer>
    {% endif %}

    <!-- JavaScript for Dynamic Navigation Bar & Floating Contact Panel -->
    <script>
        // Debounce function to limit how often a function is called
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        document.addEventListener('DOMContentLoaded', () => {
            const navbar = document.getElementById('navbar');
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            // Element for the new floating contact stack
            const floatingContactStack = document.getElementById('floating-contact-stack');
            
            // Calculate the 50% scroll height trigger point for the floating icons
            const triggerScrollPoint = window.innerHeight * 0.5;

            // --- 1. Combined Scroll Listener for Navbar and Floating Contact Panel ---
            const handleScroll = () => {
                const scrollY = window.scrollY;

                // 1A. Navbar background change
                if (scrollY > 50) {
                    navbar.classList.add('scrolled');
                } else {
                    navbar.classList.remove('scrolled');
                }

                // 1B. Floating Contact Panel visibility logic
                if (floatingContactStack) {
                    if (scrollY > triggerScrollPoint) {
                        // Show the bar
                        if (!floatingContactStack.classList.contains('show')) {
                            floatingContactStack.classList.add('show');
                        }
                    } else {
                        // Hide the bar when scrolling back near the top
                        if (floatingContactStack.classList.contains('show')) {
                            floatingContactStack.classList.remove('show');
                        }
                    }
                }
            };
            
            // Attach the debounced scroll listener
            window.addEventListener('scroll', debounce(handleScroll, 10));
            // Run on load to handle initial position
            handleScroll();

            // --- 2. Mobile Menu Toggle ---
            mobileMenuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });
            
            // Close mobile menu when a link is clicked
            mobileMenu.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', () => {
                    mobileMenu.classList.add('hidden');
                });
            });
        });
    </script>
</body>
</html>
